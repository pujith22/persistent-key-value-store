# Test builds (no PostgreSQL client required)
# The repository includes a test-only persistence adapter stub at
# `test/persistence_adapter_stub.cpp` which the tests use to avoid linking libpq.

g++ -std=c++17 test/test_server.cpp server.cpp test/persistence_adapter_stub.cpp -I include -I third_party -lpthread -o test_server.out
./test_server.out

g++ -std=c++17 test/test_metrics.cpp server.cpp test/persistence_adapter_stub.cpp -I include -I third_party -lpthread -o test_metrics.out
./test_metrics.out

# For integration tests against an actual PostgreSQL instance, link persistence_adapter.cpp
# and provide libpq headers/libs (see build_instruction.txt for production build hints).